<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>8.1. Constructors &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.fafafbd97df8a0d1.css?v=B5361BC8" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.e4d5592da655219f.css?v=32648AE5" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/runtime.b0f8547c48f16a9f.bundle.js?v=2731F567"></script>
    <script src="../_static/637.d54be67956c5c660.bundle.js?v=915B1670"></script>
    <script src="../_static/runestone.0e9550fe42760516.bundle.js?v=71AD37BA"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.2. Static members" href="static.html" />
    <link rel="prev" title="8. Class constructors and overloads" href="index.html" />


<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '6.2.1';
  eBookConfig.jobehost = 'https://red-voice-1370.fly.dev/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <div class="brand-logo"><img src="../_static/img/RAIcon.png" alt=""></div>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>
        <li><span id="browsing_warning"></span></li>

        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">8. </span>Class constructors and overloads" data-toggle="tooltip">
    <a href="index.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">8.2. </span>Static members' data-toggle="tooltip" >              
    <a href="static.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="constructors">
<span id="index-0"></span><h1><span class="section-number">8.1. </span>Constructors<a class="headerlink" href="#constructors" title="Permalink to this headline">¶</a></h1>
<p>All user defined types include a constructor.
Even if you do not write one explicitly,
the compiler will write one for you.
For most of the classes and structs seen so far,
we let the compiler generate the default constructors for us.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 47%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Function Signature</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>default constructor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>copy constructor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X(const</span> <span class="pre">X&amp;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>copy assignment</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">operator=(const</span> <span class="pre">X&amp;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>move constructor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X(X&amp;&amp;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>move assignment</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">operator=(X&amp;&amp;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>destructor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">~X()</span></code></p></td>
</tr>
</tbody>
</table>
<dl>
<dt>default constructor</dt><dd><p>Create a new object in ‘the default way’.
If you do not write one, the compiler will unless you write your
own overloaded constructor.</p>
<p>The default constructor can be overloaded like any other function.
When you design your types, you may create constructors with
one, two, or more arguments as appropriate.</p>
</dd>
<dt>copy constructor</dt><dd><p>Create a new object by copying an existing object.</p>
</dd>
<dt>copy assignment</dt><dd><p>Replace the state of an existing object using another object.</p>
</dd>
<dt>move constructor</dt><dd><p>Added in C++11.
Like copy construction, but the existing source object is invalidated.
The state is <em>moved</em> from the source object when the new object is constructed.</p>
</dd>
<dt>move assignment</dt><dd><p>Added in C++11.
Like copy assignment, but the existing source object is invalidated.
The state is <em>moved</em> from the source object when the object state is transferred.</p>
<p>Move assignment and move constructors are optional.
If you do not define them, the compiler will fall back to the copy constructor and
copy assignment instead.
However, move semantics may make your code more efficient by replacing potentially
expensive copy operations with faster alternatives.</p>
</dd>
<dt>destructor</dt><dd><p>A <em>destructor</em> is a special function that is <strong>always</strong> called when
an object goes out of scope.
The purpose of a destructor is to reclaim any memory or perform any other
cleanup tasks that need doing before the object is finally destroyed.
A few points about destructors:</p>
<ul class="simple">
<li><p>Like constructors, destructors have no return type.</p></li>
<li><p>Destructors take no arguments, so they never have a parameter list.
There is no way to overload a destructor.</p></li>
<li><p>We don’t call this function ourselves, we leave that to a program as it runs.</p></li>
</ul>
<p>We will explore destructors more when we explore containers.
For now, just remember that a destructor always exists for every class
whether you write one or not and it is always called when the class is destroyed.</p>
</dd>
</dl>
<p>The compiler will <strong>not</strong> generate a default
constructor if we write any non-default ones.
The compiler may still create other default operations.</p>
<p>So while this is fine:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">point</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w">        </span><span class="c1">// implicitly defined constructor</span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w">    </span><span class="c1">// implicitly defined copy constructor</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We can only initialize our point using the default constructor.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// this works, but it&#39;s tedious</span>
<span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span><span class="w"></span>


<span class="c1">// This syntax is preferred, but won&#39;t compile</span>
<span class="n">point</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>If we want to initialize class members at construction time,
then we need to add custom constructors.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">point</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">};</span><span class="w">  </span><span class="c1">// 2 arg constructor OK</span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w">    </span><span class="c1">// default copy constructor</span>
<span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">e</span><span class="p">;</span><span class="w">        </span><span class="c1">// compile error</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Now we can use our 2 argument constructor,
but now our old default invocation is broken.
You’ll see and error like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>foo.cpp:11:11: error: no matching constructor for initialization of &#39;point&#39;
</pre></div>
</div>
<p>This is fixed by either:</p>
<ul>
<li><p>Writing our own default implementation</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">point</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"></span>
<span class="p">{}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Telling the compiler to write it</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">point</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Telling the compiler to delete it</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">point</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>In this case, attempting the use the default constructor is still a
compile error, but the error is more explicit: you can’t use it because it was deleted.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you write a non-default constructor,
then you should <em>always</em> write your own default constructor,
or explicitly instruct the compiler to make it for you,
or delete it.</p>
<p>In general, take care deleting the default constructor.
Delete it only when you are sure objects of the class will <strong>never</strong>
need to be default constructed.</p>
</div>
<section id="initialization-syntax">
<h2><span class="section-number">8.1.1. </span>Initialization syntax<a class="headerlink" href="#initialization-syntax" title="Permalink to this headline">¶</a></h2>
<p>Some programmers coming to C++ from other OO languages sometimes
feel as if they have to initialize objects like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">point</span><span class="w"> </span><span class="nf">p</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>Even though all semester, you been writing:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">random_device</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>When it comes to user defined types, sometimes it feels ‘incomplete’
if you don’t include the <code class="docutils literal notranslate"><span class="pre">()</span></code>.
Usually, those parentheses create more problems than they resolve.
This is because of an inherent ambiguity in the C++ language.
Although it seems obvious to us the statement <code class="docutils literal notranslate"><span class="pre">point</span> <span class="pre">p();</span></code>
is a call to the default constructor and the results should be a new variable <code class="docutils literal notranslate"><span class="pre">p</span></code>,
the compiler interprets it differently.</p>
<p>The basic rule is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>If it looks like a function call, it&#39;s a function call.
</pre></div>
</div>
<p>This means that in the code above, the compiler instead looks for:</p>
<ul class="simple">
<li><p>a function named <code class="docutils literal notranslate"><span class="pre">p</span></code></p></li>
<li><p>that takes no arguments</p></li>
<li><p>and returns an object of type <code class="docutils literal notranslate"><span class="pre">point</span></code></p></li>
</ul>
<p>Since in this case, there is no such function, it returns an error.
Some compilers, like <em>clang</em>, will try to tell you:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>point.cpp:7:12: warning: empty parentheses interpreted as a function declaration [-Wvexing-parse]
    point p();
           ^~
point.cpp:7:12: note: replace parentheses with an initializer to declare a variable
    point p();
           ^~
</pre></div>
</div>
<p>C++ resolves this ambiguity in C++11 using the <em>uniform initializer syntax</em>.
You can use curly braces: <code class="docutils literal notranslate"><span class="pre">{}</span></code> instead of parentheses to initialize objects.
Braces are an extension of the initializer list syntax for containers
and can be used even for default constructed objects.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">{};</span><span class="w"></span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{};</span><span class="w"></span>
<span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="p">{};</span><span class="w"></span>
<span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">{</span><span class="s">&quot;hello, world!&quot;</span><span class="p">};</span><span class="w"></span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>While the above works every time, omitting the braces entirely when not needed is preferred:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"></span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"></span>
<span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Initializer syntax works within constructors as well.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">vector</span><span class="o">&lt;</span><span class="n">point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">redundant</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">point</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span><span class="w"></span>
<span class="w">   </span><span class="n">point</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span><span class="w"></span>
<span class="w">   </span><span class="n">point</span><span class="w"> </span><span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">13</span><span class="p">},</span><span class="w"></span>
<span class="w">   </span><span class="n">point</span><span class="w"> </span><span class="p">{</span><span class="mi">21</span><span class="p">,</span><span class="mi">34</span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="c1">// The compiler can deduce the type in the container,</span>
<span class="c1">// so we don&#39;t have to repeat the type every time</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">13</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">21</span><span class="p">,</span><span class="mi">34</span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Recall that for containers, there is a difference between
<code class="docutils literal notranslate"><span class="pre">vector&lt;int&gt;(5)</span></code>
and
<code class="docutils literal notranslate"><span class="pre">vector&lt;int&gt;{5}</span></code>.
What’s the difference?</p>

    <div data-component="reveal" class="runestone " id="reveal-whats-the-difference"   data-showtitle="Show" data-hidetitle="Hide"  style="visibility: hidden;">
    <p>The first version creates a vector of size 5 with no initialized values.</p>
<p>The second version creates a vector of size 1 with a single value equal to 5.</p>

    </div>
    </section>
<section id="overloaded-constructors">
<h2><span class="section-number">8.1.2. </span>Overloaded constructors<a class="headerlink" href="#overloaded-constructors" title="Permalink to this headline">¶</a></h2>
<p>The same guidelines that apply to writing good functions apply to writing good
overloaded constructors.
A good class is built around good functions.
Just as with regular functions,
avoid confusing parameter lists.
Consider the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Date</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>It’s seems likely that the three parameters represent the
year, month, and day, but without reading the code,
there is no way to know what order.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// is this correct?</span>
<span class="n">Date</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1776</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">};</span><span class="w"></span>

<span class="c1">// or this?</span>
<span class="n">Date</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1776</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Even if we read the code and learn the order,
it is still probable that we will forget the order and transpose
a month and day at some point.</p>
<p>Instead of resigning ourselves to hoping we remember or
having debugging problems at runtime, simply defining
appropriate types improves clarity and utility:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">year</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">year</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">year</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">{</span><span class="n">value</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">;}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">month</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">jan</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">feb</span><span class="p">,</span><span class="w"> </span><span class="n">mar</span><span class="p">,</span><span class="w"> </span><span class="n">apr</span><span class="p">,</span><span class="w"> </span><span class="n">may</span><span class="p">,</span><span class="w"> </span><span class="n">jun</span><span class="p">,</span><span class="w"> </span><span class="n">jul</span><span class="p">,</span><span class="w"> </span><span class="n">aug</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="p">,</span><span class="w"> </span><span class="n">oct</span><span class="p">,</span><span class="w"> </span><span class="n">nov</span><span class="p">,</span><span class="w"> </span><span class="n">dec</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="c1">// now a new date can be constructed like:</span>
<span class="n">Date</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">year</span><span class="p">{</span><span class="mi">1776</span><span class="p">},</span><span class="w"> </span><span class="n">month</span><span class="o">::</span><span class="n">jul</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>This version is easier for programmers to remember and any errors are
compile errors instead of runtime errors.</p>
</section>
<section id="telescoping-constructors">
<h2><span class="section-number">8.1.3. </span>Telescoping constructors<a class="headerlink" href="#telescoping-constructors" title="Permalink to this headline">¶</a></h2>
<p>The original <code class="docutils literal notranslate"><span class="pre">date</span></code> class suffered from a common design problem:
too many parameters of the same type.
A closely related problem is how to provide flexibility when constructing
new objects. A common solution is to provide constructors with
different numbers of arguments:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">date</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">date</span><span class="p">();</span><span class="w">                          </span><span class="c1">// make a default date</span>
<span class="w">   </span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w">                    </span><span class="c1">// use a default month and day</span>
<span class="w">   </span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="n">m</span><span class="p">);</span><span class="w">           </span><span class="c1">// use a default day</span>
<span class="w">   </span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="p">);</span><span class="w">  </span><span class="c1">// specify the entire date</span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>What about the possibility of specifying <code class="docutils literal notranslate"><span class="pre">month</span></code> and <code class="docutils literal notranslate"><span class="pre">day</span></code>?
How many different constructors should be allowed?
The number of permutations get unmaintainable even for a relatively
few number of parameters.</p>
<p>This is called a <em>telescoping constructor</em>, and is generally
considered an <a class="reference internal" href="../glossary.html#term-anti-pattern"><span class="xref std std-term">anti-pattern</span></a>.
That is, there are better solutions to this problem.</p>
<p>The easiest solution in C++ is to use default values for function parameters.
This works best when the default values are different types
and there is no need to allow every possible combination of parameters.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">date</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">::</span><span class="n">current_year</span><span class="p">(),</span><span class="w"></span>
<span class="w">        </span><span class="n">month</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">::</span><span class="n">current_month</span><span class="p">(),</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">::</span><span class="n">current_day</span><span class="p">());</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>This solution is still limited by the fact that defaults are still evaluated
left to right.
A date declaration of the form</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">{</span><span class="mi">15</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>won’t create a date for the 15th day of the current month and year.
In addition, the solution does not work well when all (or most)
of the parameters are the same type.
Consider this example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">NutritionFacts</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="c1">// variables in need of initialization to make valid object</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">serving_size_</span><span class="p">;</span><span class="w">  </span><span class="c1">// mL</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">servings_</span><span class="p">;</span><span class="w">         </span><span class="c1">// per container</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calories_</span><span class="p">;</span><span class="w">      </span><span class="c1">// Kcal</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">fat_</span><span class="p">;</span><span class="w">           </span><span class="c1">// g</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">sodium_</span><span class="p">;</span><span class="w">        </span><span class="c1">// mg</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">carbs_</span><span class="p">;</span><span class="w">         </span><span class="c1">// g</span>

<span class="w">  </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="c1">// How about this as a solution?</span>
<span class="w">   </span><span class="n">NutritionFacts</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Is the proper order <code class="docutils literal notranslate"><span class="pre">calories</span></code>, <code class="docutils literal notranslate"><span class="pre">fat</span></code>, <code class="docutils literal notranslate"><span class="pre">carbs</span></code>, or
<code class="docutils literal notranslate"><span class="pre">fat</span></code>, <code class="docutils literal notranslate"><span class="pre">calories</span></code>, <code class="docutils literal notranslate"><span class="pre">carbs</span></code>, or
something else?
Even if we give these parameters meaningful names,
there is no runtime enforcement.
It’s easy to make a mistake when too many parameters are the same type.</p>
<p>When confronted with many optional parameters,
a builder is an effective alternative.
Basic ideas:</p>
<ul>
<li><p>Use constructor parameters to accept mandatory parameters.</p></li>
<li><p>Use a helper class (Builder) to default initialize optional parameters.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Builder::build()</span></code> function creates a NutritionFacts object from a builder.</p></li>
<li><p>The builder makes the class it helps a friend.</p>
<p>This is used only avoid creating builder accessor functions.</p>
</li>
<li><p>A conversion constructor is used to copy builder state into the
enclosing class.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">NutritionFacts</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="c1">// variables in need of initialization to make valid object</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">serving_size_</span><span class="p">;</span><span class="w">  </span><span class="c1">// mL</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">servings_</span><span class="p">;</span><span class="w">         </span><span class="c1">// per container</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calories_</span><span class="p">;</span><span class="w">      </span><span class="c1">// Kcal</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">fat_</span><span class="p">;</span><span class="w">           </span><span class="c1">// g</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">sodium_</span><span class="p">;</span><span class="w">        </span><span class="c1">// mg</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">carbs_</span><span class="p">;</span><span class="w">         </span><span class="c1">// g</span>


<span class="w">  </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Only one simple constructor for mandatory parameters</span>
<span class="w">    </span><span class="c1">// - rest is handled by Builder</span>
<span class="w">    </span><span class="n">NutritionFacts</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">serving_size</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">servings</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="n">serving_size_</span><span class="p">{</span><span class="n">serving_size</span><span class="p">},</span><span class="w"> </span><span class="n">servings_</span><span class="p">{</span><span class="n">servings</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">calories_</span><span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="n">fat_</span><span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="n">sodium_</span><span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="n">carbs_</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// use this class to construct Nutritionfacts</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Builder</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="k">friend</span><span class="w"> </span><span class="n">NutritionFacts</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">serving_size_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span><span class="w">  </span><span class="c1">// mL</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">servings_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">         </span><span class="c1">// per container</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">calories_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">       </span><span class="c1">// Kcal</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">fat_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">            </span><span class="c1">// g</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">sodium_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">         </span><span class="c1">// mg</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">carbs_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">          </span><span class="c1">// g</span>

<span class="w">      </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="c1">// create a NutritionFacts object from a builder</span>
<span class="w">        </span><span class="n">NutritionFacts</span><span class="w"> </span><span class="nf">build</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">NutritionFacts</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">serving_size</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">serving_size_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">servings</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">servings_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">calories</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">calories_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">fat</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">fat_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">sodium</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">sodium_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">carbohydrates</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">carbs_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="p">};</span><span class="w"></span>

<span class="w">    </span><span class="k">explicit</span><span class="w"> </span><span class="n">NutritionFacts</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Builder</span><span class="o">&amp;</span><span class="w"> </span><span class="n">builder</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="n">serving_size_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">serving_size_</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">servings_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">servings_</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">calories_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">calories_</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">fat_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">fat_</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">sodium_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">sodium_</span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="n">carbs_</span><span class="p">{</span><span class="n">builder</span><span class="p">.</span><span class="n">carbs_</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">serving_size</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">serving_size_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">servings</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">servings_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">calories</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">calories_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">fat</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">fat_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">sodium</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">sodium_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">carbohydrates</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">carbs_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>


<span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="w"> </span><span class="n">os</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">NutritionFacts</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Serving size: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">serving_size</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Servings: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">servings</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Cal: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">calories</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Fat: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">fat</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Sodium: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">sodium</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Carbs: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">carbohydrates</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>When complete, the classes can be used like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;NutritionFacts.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// make some facts without any optional parts</span>
<span class="w">  </span><span class="n">NutritionFacts</span><span class="w"> </span><span class="n">cake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">};</span><span class="w"></span>

<span class="w">  </span><span class="c1">// create a builder</span>
<span class="w">  </span><span class="n">NutritionFacts</span><span class="o">::</span><span class="n">Builder</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// change the state</span>
<span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">serving_size</span><span class="p">(</span><span class="mf">28.4</span><span class="p">).</span><span class="n">servings</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">fat</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="n">sodium</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">calories</span><span class="p">(</span><span class="mi">150</span><span class="p">).</span><span class="n">carbohydrates</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// create a set of nutrition facts using the builder</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">chips</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">build</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// create nutrition facts without creating a (named)</span>
<span class="w">  </span><span class="c1">// temporary builder object</span>
<span class="w">  </span><span class="c1">//</span>
<span class="w">  </span><span class="n">NutritionFacts</span><span class="w"> </span><span class="n">soda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NutritionFacts</span><span class="o">::</span><span class="n">Builder</span><span class="p">()</span><span class="w"></span>
<span class="w">                        </span><span class="p">.</span><span class="n">serving_size</span><span class="p">(</span><span class="mi">368</span><span class="p">).</span><span class="n">servings</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="p">.</span><span class="n">carbohydrates</span><span class="p">(</span><span class="mi">40</span><span class="p">).</span><span class="n">calories</span><span class="p">(</span><span class="mi">150</span><span class="p">).</span><span class="n">sodium</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Cake:</span><span class="se">\t</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cake</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Chips:</span><span class="se">\t</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">chips</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Soda:</span><span class="se">\t</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">soda</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>While not the most idiomatic C++ solution,
it is something we can create and use with only the knowledge
of classes we have so far.
We will revisit the builder pattern later after we cover inheritance.</p>
<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Most_vexing_parse">Most vexing parse (wikipedia)</a></p></li>
<li><p>Item #6 “Most Vexing Parse” from ‘Effective STL’ by Scott Meyers (Addison-Wesley Professional).
Copyright 2001 Scott Meyers, 978-0-201-74962-5.</p></li>
<li><p>Builder design pattern:</p>
<ul>
<li><p><a class="reference external" href="http://www.oodesign.com/builder-pattern.html">Builder Design Pattern</a> on oodesign.com</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Builder_pattern">Builder Design Pattern</a> on Wikipedia</p></li>
<li><p><a class="reference external" href="https://gist.github.com/DavidTPate/9041099">Example telescoping constructor</a></p></li>
<li><p>Effective Java, by Joshua Bloch.
Item #2: Consider a builder when faced with many constructor parameters</p></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 8. Class constructors and overloads' data-toggle="tooltip">
  <a href="index.html" aria-label="Previous - 8. Class constructors and overloads">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 8.2. Static members' data-toggle="tooltip" >
    <a href="static.html" aria-label="Next - 8.2. Static members">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2022 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 6.2.1.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>